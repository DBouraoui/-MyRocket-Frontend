<form [formGroup]="formGroup" class="max-w-3xl mx-auto space-y-4 py-2" (ngSubmit)="onSubmit()">
  <div class="card flex justify-center">
    <p-selectButton
      [options]="TypeOption"
      optionLabel="name"
      formControlName="isCompany"
      optionValue="value"
      aria-labelledby="basic"
      allowEmpty="false"
    ></p-selectButton>
  </div>
  @if (!formGroup.get('isCompany')?.value) {
    <div class="grid grid-cols-1 gap-2 md:grid-cols-2">
      <div class="card p-3 bg-transparent border border-gray-200 rounded-lg">
        <p-iftalabel>
          <p-iconfield>
            <p-inputicon class="pi pi-user text-gray-500" />
            <input
              pInputText
              id="lastname"
              formControlName="lastname"
              autocomplete="off"
              class="w-full bg-transparent"
            />
          </p-iconfield>
          <label for="lastname" class="text-gray-600">Nom</label>
        </p-iftalabel>
      </div>

      <div class="card p-3 bg-transparent border border-gray-200 rounded-lg">
        <p-iftalabel>
          <p-iconfield>
            <p-inputicon class="pi pi-user text-gray-500" />
            <input
              pInputText
              id="firstname"
              formControlName="firstname"
              autocomplete="off"
              class="w-full bg-transparent"
            />
          </p-iconfield>
          <label for="firstname" class="text-gray-600">Prénom</label>
        </p-iftalabel>
      </div>
    </div>
  } @else {
    <div class="card p-3 bg-transparent border border-gray-200 rounded-lg">
      <p-iftalabel>
        <p-iconfield>
          <p-inputicon class="pi pi-building text-gray-500" />
          <input
            pInputText
            id="companyName"
            formControlName="companyName"
            autocomplete="off"
            class="w-full bg-transparent"
          />
        </p-iconfield>
        <label for="companyName" class="text-gray-600">Société</label>
      </p-iftalabel>
    </div>
  }
  <div class="grid grid-cols-1 md:grid-cols-2 gap-2">
    <div class="card p-3 bg-transparent border border-gray-200 rounded-lg">
      <p-iftalabel>
        <p-iconfield>
          <p-inputicon class="pi pi-envelope text-gray-500" />
          <input
            pInputText
            id="email"
            formControlName="email"
            autocomplete="off"
            class="w-full bg-transparent"
          />
        </p-iconfield>
        <label for="email" class="text-gray-600">Email</label>
      </p-iftalabel>
    </div>

    <div class="card p-3 bg-transparent border border-gray-200 rounded-lg">
      <p-iftalabel>
        <p-iconfield>
          <p-inputicon class="pi pi-phone text-gray-500" />
          <input
            pInputText
            id="phone"
            formControlName="phone"
            autocomplete="off"
            class="w-full bg-transparent"
          />
        </p-iconfield>
        <label for="phone" class="text-gray-600">Numéro de téléphone</label>
      </p-iftalabel>
    </div>
  </div>

  <div class="card p-3 bg-transparent border border-gray-200 rounded-lg">
    <p-iftalabel>
      <p-iconfield>
        <p-inputicon class="pi pi-map-marker text-gray-500" />
        <input
          pInputText
          id="address"
          formControlName="address"
          autocomplete="off"
          class="w-full bg-transparent"
        />
      </p-iconfield>
      <label for="address" class="text-gray-600">Adresse postale</label>
    </p-iftalabel>
  </div>

  <div class="grid grid-cols-1 md:grid-cols-2 gap-2">
    <div class="card p-3 bg-transparent border border-gray-200 rounded-lg">
      <p-iftalabel>
        <p-iconfield>
          <p-inputicon class="pi pi-home text-gray-500" />
          <input
            pInputText
            id="city"
            formControlName="city"
            autocomplete="off"
            class="w-full bg-transparent"
          />
        </p-iconfield>
        <label for="city" class="text-gray-600">Ville</label>
      </p-iftalabel>
    </div>

    <div class="card p-3 bg-transparent border border-gray-200 rounded-lg">
      <p-iftalabel>
        <p-iconfield>
          <p-inputicon class="pi pi-hashtag text-gray-500" />
          <input
            pInputText
            id="postCode"
            formControlName="postCode"
            autocomplete="off"
            class="w-full bg-transparent"
          />
        </p-iconfield>
        <label for="postCode" class="text-gray-600">Code postal</label>
      </p-iftalabel>
    </div>
  </div>

  <div class="card p-3 bg-transparent border border-gray-200 rounded-lg">
    <p-iftalabel>
      <p-iconfield>
        <p-inputicon class="pi pi-globe text-gray-500" />
        <p-select
          [options]="countries"
          optionLabel="name"
          formControlName="country"
          placeholder="Sélectionnez un pays"
          class="w-full bg-transparent"
        />
      </p-iconfield>
      <label for="country" class="text-gray-600">Pays</label>
    </p-iftalabel>
  </div>

  <div class="flex justify-end gap-4 mt-6">
    <button
      pButton
      pRipple
      type="button"
      label="Annuler"
      icon="pi pi-times"
      class="p-button-outlined p-button-secondary"
      (click)="rollback()"
    ></button>
    <button
      pButton
      pRipple
      type="submit"
      label="Enregistrer"
      icon="pi pi-check"
      class="p-button-primary bg-blue-500 border-blue-500 hover:bg-blue-600"
      [loading]="isLoading"
      [disabled]="isLoading"
    ></button>
  </div>
</form>
